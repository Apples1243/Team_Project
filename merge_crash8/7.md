## 📚 8.7 리베이스
> 리베이스는 브랜치를 합치는 또 다른 방법으로, 커밋의 트리 구조를 재배열합니다.
### 8.7.1 베이스
<img width="551" alt="브랜치의 기준 커밋" src="https://user-images.githubusercontent.com/60035227/203028196-c4039dc2-afe5-428f-8b04-28e0553d9e68.png">  

* 브랜치는 커밋 하나를 기준으로 새로운 작업을 진행할 수 있는 분리된 작업 경로를 의미합니다.
* 위 그림에서는 ***커밋2***를 기준으로 기존의 master 브랜치와 새로 파생된 A 브랜치로 나뉘는 것을 볼 수 있습니다.
* 이때, ***새로운 브랜치가 파생되는 커밋2를 베이스(base)라고 합니다.***  

---
### 8.7.2 베이스 변경
> 리베이스는 베이스 앞에 '다시'를 의미하는 re가 붙은 단어입니다. 파생된 브랜치의 기준이 되는 베이스 커밋을 변경하는 것입니다.  

* 브랜치의 베이스를 변경하는 이유는 커밋의 진행 모습을 단순화하기 때문입니다.  
<img width="680" alt="3-way 병합_소스트리" src="https://user-images.githubusercontent.com/60035227/203035839-2dd4954a-2761-4691-97c5-8bf1f3a9eb29.png">  

* 기존의 3-way 병합을 이용할 경우 브랜치가 많아지면 커밋을 관리하고 파악하기 어렵습니다.  

<img width="626" alt="리베이스 병합" src="https://user-images.githubusercontent.com/60035227/203036779-82ec3de5-305f-4beb-923e-fa75e4b11828.png"> 

* 리베이스를 이용하면 커밋 이력이 여러 갈래로 나뉘지 않아 커밋의 진행 사항을 좀 더 쉽게 파악할 수 있습니다.
* 위 그림에서는 A 브랜치의 베이스를 master 브랜치의 커밋6로 변경했으며, 커밋3, 커밋4는 리베이스된 커밋6 이후로 재정렬됩니다.

---
### 8.7.3 리베이스 vs 병합

<img width="534" alt="3-way 병합_Git 교과서" src="https://user-images.githubusercontent.com/60035227/203039891-0bc3f334-80e4-49ab-90ed-763ab0fe3e03.png">  

* 위 그림의 3-way 병합은 두 브랜치의 공통 조상 커밋으로부터 순차적으로 커밋을 비교하고, 마지막 최종 커밋을 생성합니다.
* 반면에 ***리베이스는 두 브랜치를 서로 비교하지 않고 순차적으로 커밋 병합을 시도합니다.***
* 리베이스에서 브랜치의 커밋을 결합하는 순서는 다음과 같습니다.    
   
<br/>

1. 공통 조상 커밋 찾기  
2. 베이스 커밋 변경 후 두 브랜치의 커밋 위치 재정렬  
3. 파생된 브랜치의 diff를 임시 공간에 잠시 보관  
4. master 브랜치의 커밋1 &rightarrow; 커밋2 &rightarrow; 커밋5 &rightarrow; 커밋6까지 진행  
5. 기존 베이스 커밋2에서 커밋6으로 베이스 기준점 변경  
6. 변경하는 기준 브랜치의 마지막 커밋에서 차례로 임시 공간에 저장한 diff를 하나씩 적용  
7. 새로운 베이스 기준점을 기반으로 한 브랜치에서 커밋3 커밋4를 커밋6에서 연장하여 수정 재배치  

<br/>

<img width="627" alt="커밋 재배치" src="https://user-images.githubusercontent.com/60035227/203045744-d8a9edc0-87fa-4f44-ae43-eed8ba832da6.png">  

* 위의 리베이스 결과물을 보면 기존 병합과 두 가지 차이점이 있습니다.
* 3-way 병합은 병합 커밋이 있지만, 리베이스를 하면 병합 커밋은 없습니다.
* master 브랜치와 A 브랜치가 서로 마지막을 가리키는 커밋 위치가 다릅니다.  
>***Note*** 이 경우 Fast-Forward 병합을 통해 master 브랜치의 HEAD 포인터를 이동시켜줘야 합니다.

---
### 8.7.4 리베이스 명령어  
> 리베이스 작업은 rebase 명령어를 사용합니다.
```git
$ git rebase 브랜치
```

